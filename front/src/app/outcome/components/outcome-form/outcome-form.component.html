<empty-state *ngIf="curOutcome == undefined" title="Dépense non trouvée"></empty-state>
<form class="form-horizontal" *ngIf="curOutcome != undefined">
    <div class="twoCol">
        <div class="form-group">
                <label class="form-label" for="date">Date</label>
                <input class="form-input" type="date" id="date" [required]="!curOutcome.recurrent" [(ngModel)]="curOutcome.date"
                    ng-model-options="{ getterSetter: true }" [formControl]="this.dateFrm">
        </div>
        <div class="form-group">
                <label class="form-label" for="account">Compte</label>
                <select class="form-select" id="account" required="true" [(ngModel)]="curOutcome.account"
                    ng-model-options="{ getterSetter: true }" [formControl]="this.accountFrm">
                    <option *ngFor="let cpt of this.account" value="{{cpt}}">{{cpt}}</option>
                </select>
        </div>
        <div class="form-group">
                <label class="form-label" for="recipient">Bénéficiaire</label>
                <input class="form-input" type="text" id="recipient" [(ngModel)]="curOutcome.recipient"
                    ng-model-options="{ getterSetter: true }" [formControl]="this.recipientFrm">
        </div>
    </div>

    <div class="twoCol">
        <div class="form-group">
            <label class="form-label" for="amount">Montant</label>
                <input class="form-input" type="number" id="amount" step="0.01" required="true" [(ngModel)]="curOutcome.amount"
                ng-model-options="{ getterSetter: true }" [formControl]="this.amountFrm" inputmode="numeric">&nbsp;€
        </div>
        <div class="form-group">
            <label class="form-label">Montant payé</label>
            <span class="form-input">{{curOutcome.amountPaid | currency:'EUR':'symbol':'.2-2':this.locale}}</span>
        </div>
    </div>

    <div class="twoCol">
        <label class="form-switch">
            <input type="checkbox" id="end_of_month" required="true" [(ngModel)]="curOutcome.end_of_month"
            ng-model-options="{ getterSetter: true }" [formControl]="this.endOfMonthFrm">
            <i class="form-icon"></i> Encours
        </label>
        <label class="form-switch">
            <input type="checkbox" id="on_account" required="true" [(ngModel)]="curOutcome.on_account"
            ng-model-options="{ getterSetter: true }" [formControl]="this.onAccountFrm">
            <i class="form-icon"></i> Passé sur le compte
        </label>
        <label class="form-switch">
            <input type="checkbox" id="waiting" required="true" [(ngModel)]="curOutcome.waiting"
            ng-model-options="{ getterSetter: true }" [formControl]="this.waitingFrm">
            <i class="form-icon"></i> En attente
        </label>
    </div>
    <div class="twoCol">
        <label class="form-switch">
            <input type="checkbox" id="shared" required="true" [(ngModel)]="curOutcome.shared"
            ng-model-options="{ getterSetter: true }" [formControl]="this.sharedFrm">
            <i class="form-icon"></i> Partagé
        </label>
        <label class="form-switch">
            <input type="checkbox" id="refunded" required="true" [(ngModel)]="curOutcome.refunded"
            ng-model-options="{ getterSetter: true }" [formControl]="this.refundedFrm">
            <i class="form-icon"></i> Remboursé
        </label>
    </div>
    <div class="form-group">
        <label class="form-label" for="comment">Commentaire</label>
        <textarea class="form-input" id="comment" placeholder="Commentaire" rows="3" [(ngModel)]="curOutcome.comment"
        ng-model-options="{ getterSetter: true }" [formControl]="this.commentFrm"></textarea>
    </div>

    <div class="form-group">
        <label class="form-switch">
            <input type="checkbox" id="recurrent" required="true" [(ngModel)]="curOutcome.recurrent"
            ng-model-options="{ getterSetter: true }" [formControl]="this.recurrentFrm">
            <i class="form-icon"></i> Récurrent
        </label>
    </div>
    <div class="" [class.hidden]="!curOutcome.recurrent">
        <div class="twoCol">
            <div class="form-group">
                <label class="form-label" for="start_on">A partir du ...</label>
                <input class="form-input" type="date" id="start_on" required="true" [(ngModel)]="curOutcome.start_on"
                    ng-model-options="{ getterSetter: true }" [formControl]="this.startOnFrm">
            </div>
            <div class="form-group">
                <label class="form-label" for="end_on">... jusqu'au</label>
                <input class="form-input" type="date" id="end_on" required="true" [(ngModel)]="curOutcome.end_on"
                    ng-model-options="{ getterSetter: true }" [formControl]="this.endOnFrm">
            </div>
            <div class="form-group">
                <label class="form-label" for="day">Jour de prélèvement</label>
                    <input class="form-input" type="number" id="day" min="1" max="31" [required]="curOutcome.recurrent" [(ngModel)]="curOutcome.day"
                    ng-model-options="{ getterSetter: true }" [formControl]="this.dayFrm" inputmode="numeric">
            </div>
        </div>
    </div>

    <div class="footer">
        <button class="btn" (click)="this.back()">Retour</button>
        <button class="btn btn-primary" (click)="this.save()" [disabled]="!this.formValid">Enregistrer</button>
    </div>
</form>
