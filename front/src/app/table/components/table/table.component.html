<div *ngIf="this.filters.length > 0" class="filters">
    <div class="filter" *ngFor="let filter of this.filters; let index = index">
        <form-input-container [label]="filter.label" [showAsCard]="true" [togglable]="true" [openState]="filter.active" (toggleEvent)="toggleFilter($event, filter)">
            <boolean-input *ngIf="filter.cellType == 'boolean'" [(value)]="filter.filterValue" (valueChange)="filterValueChange($event)"></boolean-input>
            <select-input *ngIf="filter.cellType != 'boolean'" [(value)]="filter.filterValue" (valueChange)="filterValueChange($event)" [values]="filter.values"></select-input>
        </form-input-container>
    </div>

</div>
<table class="table table-striped table-hover">
    <caption *ngIf="this.title">{{this.title}}</caption>
    <thead>
        <tr>
            <th *ngFor="let curCol of this.columns">{{curCol.label}}</th>
            <th *ngIf="this.actions.length > 0">&nbsp;</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let curRow of this.filteredRows">
            <td *ngFor="let curCol of this.columns">
                <span *ngIf="curCol.cellType == 'month' && curRow[curCol.field] != undefined">{{curRow[curCol.field] | date:'MMM-y'}}</span>
                <span *ngIf="curCol.cellType == 'month' && curRow[curCol.field] == undefined">&nbsp;</span>
                <span *ngIf="curCol.cellType == 'date' && curRow[curCol.field] != undefined">{{curRow[curCol.field] | date:'dd/MM/yyyy'}}</span>
                <span *ngIf="curCol.cellType == 'date' && curRow[curCol.field] == undefined">&nbsp;</span>
                <span *ngIf="curCol.cellType == 'money'">{{curRow[curCol.field]  | currency:'EUR':'symbol':'.2-2':'fr'}}</span>
                <span *ngIf="curCol.cellType == 'boolean'"><fa-icon [icon]="curRow[curCol.field]?icon.checkCircle:icon.circle"></fa-icon></span>
                <span *ngIf="curCol.cellType == 'raw'">{{curRow[curCol.field]}}</span>
            </td>
            <td class="action" *ngIf="this.actions.length > 0">
                <fa-icon  *ngFor="let curAction of this.actions" [ngbTooltip]="curAction.label" placement="left" class="hand" [icon]="icon[curAction.icon]" (click)="this.doAction(curRow, curAction.action)"></fa-icon>
            </td>
        </tr>
        <tr *ngIf="this.filteredRows.length == 0">
            <td [attr.colspan]="this.columns.length+1" class="no-data">
                Aucune donnée à afficher
            </td>
        </tr>
    </tbody>
</table>
